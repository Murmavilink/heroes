(()=>{"use strict";const e=e=>{const t=document.querySelector(".cards"),o=document.querySelector(".btn");let n=1;const s=e=>{t.innerHTML="",e.forEach((e=>{t.insertAdjacentHTML("beforeend",`\n                <div class="card">\n                   <img class="card__img" src="./db/${e.photo}" alt="${e.name+" img"}">\n                        <h3 class="card__title">${e.name}</h3>\n                </div>`)})),0===e.length&&(t.innerHTML='<span class="text-info">no information about Heroes</span>')},r=()=>{fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).then((e=>(e=>{const t=9*n;s(((e,t)=>e.slice(0,t))(e,t)),e.length>t?n++:o.remove()})(e))).catch((e=>console.log(e)))};o&&o.addEventListener("click",(()=>{r(),setTimeout((()=>{o.scrollIntoView({block:"center",behavior:"smooth"})}),30)})),e?(o&&o.remove(),s(e)):r()};e(),(()=>{const e=document.querySelector(".cards"),t=document.querySelector(".modal");e.addEventListener("click",(e=>{let o;var n;e.target.classList.contains("cards")||(o=e.target.closest(".card").querySelector(".card__title").textContent),n=o,fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).then((e=>{e.forEach((e=>{var o;e.name===n&&(o=e,document.body.classList.add("stop-scrolling"),t.classList.add("modal--show"),t.innerHTML="",t.insertAdjacentHTML("beforeend",`\n        <div class="modal__card">\n            <img class="modal__movie-backdrop" src="./db/${o.photo}" alt="">\n                <h2 class="modal__movie-title">${o.name}</h2>\n                <ul class="modal__movie-info">\n                <li><span>Имя:</span> ${o.actors}</li>\n                ${o.birthDay?`<li><span>День рождения:</span> ${o.birthDay}</li>`:"<li><span>День рождения:</span> &#9785;</li>"}\n                ${o.gender?"<li><span>Пол:</span> "+("male"===o.gender?"Мужской":"Женский"):""}</li>\n                ${o.citizenship?`<li><span>Гражданство: </span> ${o.citizenship}</li>`:""}\n                ${o.movies?`<li><span>Фильмы:</span> ${o.movies.join(", ")}</li>`:""}                    \n                </ul>\n            <button type="button" class="modal__button-close">Закрыть</button>\n        </div>`))}))})).catch((e=>console.log(e))),t.addEventListener("click",(e=>{!e.target.classList.contains("modal__button-close")&&e.target.closest(".modal__card")||(t.classList.remove("modal--show"),document.body.classList.remove("stop-scrolling"))})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(t.classList.remove("modal--show"),document.body.classList.remove("stop-scrolling"))}))}))})(),(()=>{const t=document.getElementById("sort");t.addEventListener("change",(()=>{const o=t.querySelectorAll("select");fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).catch((e=>console.log(e.message))).then((t=>{let n=t;o.forEach((e=>{if("noselected"!==e.value){const t=e.id,o=e.value;"movies"===t&&(n=((e,t)=>e.filter((e=>{if(e.movies)return e.movies.includes(t)})))(n,o)),"movies"!==t&&(n=((e,t,o)=>e.filter((e=>{if(e[t])return e[t].toLowerCase()===o.toLowerCase()})))(n,t,o))}})),e(n)}))}))})(),(()=>{const t=document.querySelector(".form-header"),o=document.querySelector(".form-header__search"),n=n=>{t.addEventListener(n,(t=>{var n;t.preventDefault(),n=o.value,fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).catch((e=>console.log(e))).then((t=>{let o=t;o=((e,t)=>e.filter((e=>e.name.toLowerCase().includes(t))))(t,n.toLowerCase()),e(o)}))}))};n("input"),n("submit")})()})();