(()=>{"use strict";(()=>{const e=document.querySelector(".cards"),o=document.querySelector(".btn");let t=1;const n=()=>{fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).then((n=>(n=>{const s=9*t;(o=>{e.innerHTML="",o.forEach(((o,t)=>{e.insertAdjacentHTML("beforeend",`\n            <div class="card" data-id="${t}">\n                <img class="card__img" src="./db/${o.photo}" alt="card img">\n                <h3 class="card__title">${o.name}</h3>\n            </div>`)}))})(((e,o)=>e.slice(0,o))(n,s)),n.length>s?t++:o.remove()})(n))).catch((e=>console.log(e)))};o.addEventListener("click",(()=>{n(),setTimeout((()=>{o.scrollIntoView({block:"center",behavior:"smooth"})}),30)})),n()})(),(()=>{const e=document.querySelector(".cards"),o=document.querySelector(".modal");e.addEventListener("click",(e=>{(e=>{fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).then((t=>{return n=t[e],document.body.classList.add("stop-scrolling"),o.classList.add("modal--show"),o.innerHTML="",void o.insertAdjacentHTML("beforeend",`\n        <div class="modal__card">\n            <img class="modal__movie-backdrop" src="./db/${n.photo}" alt="">\n                <h2 class="modal__movie-title">${n.name}</h2>\n                <ul class="modal__movie-info">\n                <li><span>Имя:</span> ${n.actors}</li>\n                ${n.birthDay?`<li><span>День рождения:</span> ${n.birthDay}</li>`:"<li><span>День рождения:</span> &#9785;</li>"}\n                <li><span>Пол:</span> ${"male"===n.gender?"Мужской":"Женский"}</li>\n                ${n.movies?`<li><span>Фильмы:</span> ${n.movies.join(", ")}</li>`:""}                    \n                </ul>\n            <button type="button" class="modal__button-close">Закрыть</button>\n        </div>`);var n})).catch((e=>console.log(e)))})(e.target.closest(".card").dataset.id),o.addEventListener("click",(e=>{!e.target.classList.contains("modal__button-close")&&e.target.closest(".modal__card")||(o.classList.remove("modal--show"),document.body.classList.remove("stop-scrolling"))})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(o.classList.remove("modal--show"),document.body.classList.remove("stop-scrolling"))}))}))})(),(()=>{const e=document.querySelector(".cards"),o=document.querySelector(".form-header"),t=document.querySelector(".form-header__search"),n=n=>{o.addEventListener(n,(o=>{var n;o.preventDefault(),n=t.value,fetch("./db/dbHeroes.json").then((e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой!")})).then((o=>((o,t)=>{e.innerHTML="",o.forEach(((n,s)=>{n.name.toLowerCase().includes(t)?e.insertAdjacentHTML("beforeend",`\n                <div class="card" data-id="${s}">\n                    <img class="card__img" src="./db/${n.photo}" alt="card img">\n                    <h3 class="card__title">${n.name}</h3>\n                </div>`):render(o)}))})(o,n.toLowerCase()))).catch((e=>console.log(e)))}))};n("input"),n("submit")})()})();